{
    "contents" : "# Code to select data omitted to comply with the requirement to not post a full \n# solution in the forums.\n\n# sum by year by fips\nbyYear <- aggregate(Emissions ~ Year + fips, data = vehicle, sum)\n# replace fips with label and rename it\nbyYear = transform(byYear, fips = as.character(factor(\n    fips, levels = c(\"24510\", \"06037\"), labels = c(\"Baltimore City\", \"Los Angeles County\")\n)))\nnames(byYear)[2] <- \"County\"\nbyYear <- transform(byYear, Emissions = round(Emissions)) # to be able to show rounded values in graph\n\n# create a column of 1999 reference values\nbyYear$Reference <- byYear$Emissions\nbyYear$Reference[byYear$County == \"Los Angeles County\"] <-\n    byYear[byYear$Year == 1999 & byYear$County == \"Los Angeles County\", \"Emissions\"]\nbyYear$Reference[byYear$County == \"Baltimore City\"] <-\n    byYear[byYear$Year == 1999 & byYear$County == \"Baltimore City\", \"Emissions\"]\n\n# I answer the question by comparing the length of the vertical line from the \n# 1999 reference to the 2008 value. I also compare the area of the respective \n# polygons bounded by the reference line and the emission values.\n# Baltimore has seen more change in absolute amounts of PM2.5 emissions between \n# 1999 and 2008, but the values for Los Angeles county have been more variable \n# as shown by the larger area bounded by its polygon.\nrequire(ggplot2)\npng(filename = \"plot6.png\", width=1200, height=800, res=120)\nprint(\n    ggplot(data = byYear, aes(x = Year, y = Emissions, group = County, color = County))  +\n        ylab(\"Tons of PM2.5\")  +\n        ggtitle(\"PM2.5 Emissions From Motor Vehicle Related Sources\\nBaltimore City vs Los Angeles County\")  +\n        geom_point(size = 3)  +\n        geom_line(linetype = \"solid\")  +\n        geom_line(aes(y = Reference), linetype = \"dashed\")  +\n        geom_text(aes(y = Reference, label = Emissions - Reference, color = County), \n                  hjust = -0.2, vjust = -0.5, angle = 0, size = 3)  +\n        geom_linerange(aes(ymin = pmin(Emissions, Reference), ymax = pmax(Emissions, Reference)),\n                       linetype = \"dashed\", stat = \"identity\")  +\n        scale_x_continuous(breaks = seq(1999, 2008, 3), \"Year\")\n)\ndev.off()\n\n# Note: If you do not see the complete png, right-click on the image and select\n# View Image.",
    "created" : 1443993935284.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "328458671",
    "id" : "C3B4777B",
    "lastKnownWriteTime" : 1443993949,
    "path" : "~/R/Coursera/assignments/exdata-032/ExData_Plotting2/plot6_alt.R",
    "project_path" : "plot6_alt.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 8,
    "source_on_save" : false,
    "type" : "r_source"
}